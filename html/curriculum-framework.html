<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chương trình khung đào tạo và tiên đề học tập</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.8/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.14.1/themes/base/jquery-ui.min.css"
      rel="stylesheet"
    />
    <link
      href="https://kendo.cdn.telerik.com/2016.3.1118/styles/kendo.common.min.css"
      rel="stylesheet"
    />
    <link
      href="https://kendo.cdn.telerik.com/2016.3.1118/styles/kendo.default.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/curriculum-framework.css" />
    <script
      src="https://kit.fontawesome.com/6f955e325d.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div class="container">
      <div class="header-section">
        <div class="header-title">
          Chương trình khung đào tạo và tiên đề học tập
        </div>
        <div class="header-subtitle">
          Năm chương trình đào tạo theo Thông tư 11 và lộ trình học tập hợp
        </div>
      </div>

      <div class="container-lg">
        <!-- Progress Section -->
        <div class="content-wrapper">
          <div class="progress-section">
            <div class="learning-progress-title">
              <div class="section-title">Tiến độ học tập</div>

              <div class="progress-label">
                <span
                  ><i class="fa-solid fa-circle badge-completed"></i> Đã hoàn
                  thành</span
                >
                <span
                  ><i class="fa-solid fa-circle badge-progress"></i> Tin chỉ
                  đang học</span
                >
                <span
                  ><i class="fa-solid fa-circle badge-notstart"></i> Tin chỉ còn
                  lại</span
                >
              </div>
            </div>

            <div class="progress-bar-div">
              <div class="progress-bar-title">
                <div>Đã hoàn thành</div>
                <div>
                  <span class="progress-percentage" id="overallPercentage"
                    >75%</span
                  >
                </div>
              </div>
              <div id="chart" class="progress-chart" style="width: 100%"></div>
            </div>

            <div class="stats-container">
              <div class="stat-box">
                <div class="stat-number green" id="totalCredits">162</div>
                <div class="stat-label">Tổng tin chỉ</div>
              </div>
              <div class="stat-box">
                <div class="stat-number blue" id="completedCredits">122</div>
                <div class="stat-label">Đã hoàn thành</div>
              </div>
              <div class="stat-box">
                <div class="stat-number yellow" id="currentCredits">24</div>
                <div class="stat-label">Tin chỉ đang học</div>
              </div>
              <div class="stat-box">
                <div class="stat-number gray" id="remainingCredits">16</div>
                <div class="stat-label">Tin chỉ còn lại</div>
              </div>
              <div class="stat-box-end">
                <div class="stat-number yellow" id="progressDiff">+ 2%</div>
                <div class="stat-label">Tiến độ so với kế hoạch</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Controls Section -->
        <div class="content-wrapper-tab-group">
          <div class="tab-buttons">
            <button class="tab-btn active">Học kỳ</button>
            <button class="tab-btn">Khối kiến thức</button>
          </div>

          <div class="controls-section">
            <div class="search-box">
              <input
                type="text"
                placeholder="Tìm kiếm môn học theo tên hoặc mã..."
              />
            </div>
            <div class="action-buttons">
              <button class="btn-custom primary">
                <i class="fas fa-bars"></i>
                Tất cả
              </button>
              <button class="btn-custom">
                <i class="fab fa-leanpub"></i>
                Chưa học
              </button>
              <button class="btn-custom">
                <i class="far fa-calendar-alt"></i>
                Bắt buộc
              </button>
            </div>
          </div>
        </div>

        <!-- Timeline Section -->
        <div class="content-wrapper">
          <div class="timeline-section">
            <h2 class="section-title">Lộ trình học tập</h2>

            <div class="timeline-container">
              <div class="timeline-wrapper">
                <!-- Semester circles -->
                <div class="timeline-items" id="timelineItems"></div>

                <!-- Timeline track with year markers -->
                <div class="timeline-bottom">
                  <div class="timeline-track-container">
                    <div class="timeline-track">
                      <div
                        class="timeline-track-progress"
                        id="timelineTrackProgress"
                      ></div>
                    </div>
                    <div
                      class="timeline-year-markers"
                      id="timelineYearMarkers"
                    ></div>
                  </div>
                </div>
              </div>
            </div>

            <div class="timeline-footer">
              <div class="timeline-date">
                <i class="fas fa-calendar-alt me-2"></i
                ><span id="startDate">9/2022</span>
              </div>
              <!-- <div class="timeline-legends">
                <div class="legend-item">
                  <span
                    class="legend-dot"
                    style="background-color: var(--color-green-completed)"
                  ></span>
                  <span>Hoàn thành</span>
                </div>
                <div class="legend-item">
                  <span
                    class="legend-dot"
                    style="background-color: var(--color-yellow-active)"
                  ></span>
                  <span>Đang học</span>
                </div>
                <div class="legend-item">
                  <span
                    class="legend-dot"
                    style="background-color: #e0e0e0"
                  ></span>
                  <span>Chưa học</span>
                </div>
              </div> -->
              <div class="legend">
                <div class="legend-item">
                  <div
                    class="legend-color"
                    style="background-color: var(--success-green)"
                  ></div>
                  <span>Hoàn thành</span>
                </div>
                <div class="legend-item">
                  <div
                    class="legend-color"
                    style="background-color: var(--primary-yellow)"
                  ></div>
                  <span>Đang học</span>
                </div>
                <div class="legend-item">
                  <div
                    class="legend-color"
                    style="background-color: #ccc"
                  ></div>
                  <span>Chưa học</span>
                </div>
              </div>
              <div class="timeline-date">
                <i class="fas fa-calendar-check me-2"></i
                ><span id="endDate">6/2026</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Knowledge Blocks Overview -->
        <div class="content-wrapper">
          <div class="knowledge-block-overview">
            <div class="section-title">Tổng quan khối kiến thức</div>

            <div class="knowledge-blocks">
              <div class="knowledge-block">
                <div class="circle-progress">
                  <svg viewBox="0 0 120 120">
                    <circle
                      cx="60"
                      cy="60"
                      r="50"
                      fill="none"
                      stroke="#e9ecef"
                      stroke-width="8"
                    />
                    <circle
                      cx="60"
                      cy="60"
                      r="50"
                      fill="none"
                      stroke="#ffb800"
                      stroke-width="8"
                      stroke-dasharray="157 314"
                      stroke-dashoffset="0"
                    />
                  </svg>
                  <div class="circle-text yellow">GDDC</div>
                </div>
                <div class="block-title">Giáo dục đại cương</div>
                <div class="block-code">32/31 tin chỉ</div>
                <div class="block-progress">
                  <div class="block-progress-bar yellow"></div>
                </div>
              </div>

              <div class="knowledge-block">
                <div class="circle-progress">
                  <svg viewBox="0 0 120 120">
                    <circle
                      cx="60"
                      cy="60"
                      r="50"
                      fill="none"
                      stroke="#e9ecef"
                      stroke-width="8"
                    />
                    <circle
                      cx="60"
                      cy="60"
                      r="50"
                      fill="none"
                      stroke="#ffb800"
                      stroke-width="8"
                      stroke-dasharray="157 314"
                      stroke-dashoffset="0"
                    />
                  </svg>
                  <div class="circle-text yellow">GDCN</div>
                </div>
                <div class="block-title">Giáo dục chuyên nghiệp</div>
                <div class="block-code">65/96 tin chỉ</div>
                <div class="block-progress">
                  <div class="block-progress-bar yellow"></div>
                </div>
              </div>

              <div class="knowledge-block">
                <div class="circle-progress">
                  <svg viewBox="0 0 120 120">
                    <circle
                      cx="60"
                      cy="60"
                      r="50"
                      fill="none"
                      stroke="#e9ecef"
                      stroke-width="8"
                    />
                    <circle
                      cx="60"
                      cy="60"
                      r="50"
                      fill="none"
                      stroke="#28a745"
                      stroke-width="8"
                      stroke-dasharray="251 314"
                      stroke-dashoffset="0"
                    />
                  </svg>
                  <div class="circle-text green">N/A</div>
                </div>
                <div class="block-title">Chưa xác định</div>
                <div class="block-code">22/22 tin chỉ</div>
                <div class="block-progress">
                  <div class="block-progress-bar"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="legend">
            <div class="legend-item">
              <div
                class="legend-color"
                style="background-color: var(--success-green)"
              ></div>
              <span>Hoàn thành</span>
            </div>
            <div class="legend-item">
              <div
                class="legend-color"
                style="background-color: var(--primary-yellow)"
              ></div>
              <span>Đang học</span>
            </div>
            <div class="legend-item">
              <div class="legend-color" style="background-color: #ccc"></div>
              <span>Chưa học</span>
            </div>
          </div>
        </div>

        <!-- Expandable Sections -->
        <div class="content-wrapper" id="expandableSections">
          <!-- JavaScript Render -->
        </div>

        <div class="footer-section">© 2025</div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.14.1/jquery-ui.min.js"></script>

    <script src="../js/curriculum-framework.js"></script>

    <script src="../js/study-progress.js"></script>

    <script src="https://kendo.cdn.telerik.com/2016.3.1118/js/kendo.all.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.8/js/bootstrap.bundle.min.js"></script>

    <script>
      $("#chart").kendoChart({
        chartArea: {
          height: 30,
          background: "#f4fbff",
        },
        legend: { visible: false },
        seriesDefaults: {
          type: "bar",
          stack: true,
        },
        series: [
          { data: [60], color: "#56a2e8" }, // xanh
          { data: [15], color: "#ffb800" }, // vàng
          { data: [25], color: "#e0e0e0" }, // xám
        ],
        valueAxis: {
          min: 0,
          max: 100,
          visible: false,
          majorGridLines: { visible: false },
          minorGridLines: { visible: false },
        },
        categoryAxis: {
          categories: [""],
          visible: false,
          majorGridLines: { visible: false },
          minorGridLines: { visible: false },
        },
        tooltip: {
          visible: true,
          template: "#= value #%",
        },
        dataBound: function () {
          var svg = $("#chart svg");

          svg.find("rect[fill]").each(function () {
            var rect = $(this);
            var fill = rect.attr("fill");

            if (fill && !fill.includes("url")) {
              rect.attr("rx", 8);
              rect.attr("ry", 8);
            }
          });
        },
      });

      function toggleSection(header) {
        const icon = header.querySelector(".section-icon");
        const content = header.nextElementSibling;

        // Close all other sections
        document.querySelectorAll(".section-header").forEach((h) => {
          if (h !== header) {
            h.classList.remove("expanded");
            h.querySelector(".section-icon").classList.remove("rotated");
            h.nextElementSibling.classList.remove("active");
          }
        });

        // Toggle current section
        header.classList.toggle("expanded");
        icon.classList.toggle("rotated");
        content.classList.toggle("active");
      }

      $(function () {
        var tooltipTriggerList = [].slice.call(
          document.querySelectorAll('[data-bs-toggle="tooltip"]'),
        );
        var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
          return new bootstrap.Tooltip(tooltipTriggerEl);
        });
      });
    </script>
  </body>
</html>
